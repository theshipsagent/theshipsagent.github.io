<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cement Market Intelligence | Interactive Maps</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.28/"></script>
    <style>
        :root {
            --primary-dark: #1B5E20;
            --primary: #2E7D32;
            --primary-light: #4CAF50;
            --secondary-dark: #0D47A1;
            --secondary: #1976D2;
            --neutral-dark: #37474F;
            --neutral-light: #ECEFF1;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: var(--neutral-light);
            color: var(--neutral-dark);
        }
        .header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.2rem;
            font-weight: 300;
            margin-bottom: 10px;
        }
        .header .subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        .nav-tabs {
            background: var(--neutral-dark);
            padding: 0 20px;
            display: flex;
            gap: 5px;
            overflow-x: auto;
        }
        .nav-tab {
            padding: 15px 25px;
            color: white;
            text-decoration: none;
            opacity: 0.7;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            transition: all 0.3s;
        }
        .nav-tab:hover, .nav-tab.active {
            opacity: 1;
            border-bottom-color: var(--primary-light);
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 30px;
        }
        .map-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: none;
        }
        .map-section.active { display: block; }
        .map-section h2 {
            color: var(--primary-dark);
            margin-bottom: 15px;
            font-size: 1.5rem;
            border-left: 4px solid var(--primary);
            padding-left: 15px;
        }
        .map-section p {
            color: #666;
            margin-bottom: 20px;
        }
        .map-container {
            height: 600px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #ddd;
        }
        .layer-legend {
            margin-top: 20px;
            padding: 15px;
            background: var(--neutral-light);
            border-radius: 8px;
        }
        .layer-legend h4 {
            margin-bottom: 10px;
            color: var(--neutral-dark);
        }
        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        .legend-symbol {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        .legend-line {
            width: 30px;
            height: 4px;
            border-radius: 2px;
        }
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        .stat-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
        }
        .stat-card .label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Cement Market Intelligence</h1>
        <div class="subtitle">Interactive ArcGIS Maps | US Import Trade Flows & Infrastructure</div>
    </div>

    <nav class="nav-tabs">
        <a href="#" class="nav-tab active" data-tab="global">Global Trade Flows</a>
        <a href="#" class="nav-tab" data-tab="national">US National View</a>
        <a href="#" class="nav-tab" data-tab="florida">Florida Focus</a>
        <a href="#" class="nav-tab" data-tab="tampa">Tampa Bay</a>
        <a href="#" class="nav-tab" data-tab="caribbean">Caribbean Export</a>
        <a href="#" class="nav-tab" data-tab="trucking">Trucking Radius</a>
        <a href="#" class="nav-tab" data-tab="sources">Sources & Methodology</a>
    </nav>

    <div class="container">
        <!-- Global Trade Flows -->
        <section class="map-section active" id="global">
            <h2>Global Cement Import Trade Flows</h2>
            <p>Weighted flow lines showing cement imports from origin countries to US ports (2023-2025). Line thickness indicates volume.</p>
            <div class="stats-row">
                <div class="stat-card">
                    <div class="value">20M MT</div>
                    <div class="label">Total US Imports</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);">
                    <div class="value">10+</div>
                    <div class="label">Origin Countries</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #00897B 0%, #004D40 100%);">
                    <div class="value">2,706</div>
                    <div class="label">Shipments Analyzed</div>
                </div>
            </div>
            <div class="map-container" id="globalMap"></div>
            <div class="layer-legend">
                <h4>Layers Included</h4>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-line" style="background: #1B5E20;"></div> Trade Flow Lines (weighted)</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #0D47A1;"></div> Origin Countries</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #E91E63;"></div> US Ports</div>
                </div>
            </div>
        </section>

        <!-- US National View -->
        <section class="map-section" id="national">
            <h2>US National Cement Infrastructure</h2>
            <p>All major cement plants and import terminals across the United States with production capacity data.</p>
            <div class="stats-row">
                <div class="stat-card">
                    <div class="value">99</div>
                    <div class="label">Cement Plants</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);">
                    <div class="value">98M MT</div>
                    <div class="label">Domestic Production</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #00897B 0%, #004D40 100%);">
                    <div class="value">17</div>
                    <div class="label">Major Import Ports</div>
                </div>
            </div>
            <div class="map-container" id="nationalMap"></div>
            <div class="layer-legend">
                <h4>Layers Included</h4>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-symbol" style="background: #1976D2;"></div> US Cement Plants</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #E91E63;"></div> Import Ports</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #FFC107; opacity: 0.5;"></div> State Production</div>
                </div>
            </div>
        </section>

        <!-- Florida Focus -->
        <section class="map-section" id="florida">
            <h2>Florida Cement Market</h2>
            <p>Florida cement plants, import terminals, ready-mix customers, and county-level demand indicators.</p>
            <div class="stats-row">
                <div class="stat-card">
                    <div class="value">7</div>
                    <div class="label">Cement Plants</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);">
                    <div class="value">894</div>
                    <div class="label">Ready-Mix Plants</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #00897B 0%, #004D40 100%);">
                    <div class="value">9M MT</div>
                    <div class="label">FL Imports</div>
                </div>
            </div>
            <div class="map-container" id="floridaMap"></div>
            <div class="layer-legend">
                <h4>Layers Included</h4>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-symbol" style="background: #1B5E20;"></div> Cement Plants</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #E91E63;"></div> Import Terminals</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #2196F3;"></div> Ready-Mix Plants (894)</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #4CAF50; opacity: 0.6;"></div> County Demand</div>
                </div>
            </div>
        </section>

        <!-- Tampa Bay -->
        <section class="map-section" id="tampa">
            <h2>Tampa Bay Region</h2>
            <p>Tampa Bay cement infrastructure, import terminals, and surrounding county demand.</p>
            <div class="stats-row">
                <div class="stat-card">
                    <div class="value">6.8M MT</div>
                    <div class="label">Tampa Imports</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);">
                    <div class="value">75%</div>
                    <div class="label">FL Import Share</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #FF9800 0%, #E65100 100%);">
                    <div class="value">NEW</div>
                    <div class="label">Port Redwing Terminal</div>
                </div>
            </div>
            <div class="map-container" id="tampaMap"></div>
            <div class="layer-legend">
                <h4>Layers Included</h4>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-symbol" style="background: #1B5E20;"></div> Cement Plants</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #E91E63;"></div> Import Terminals</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #2196F3;"></div> Ready-Mix Customers</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #FF9800;"></div> Port Redwing (New)</div>
                </div>
            </div>
        </section>

        <!-- Caribbean Export -->
        <section class="map-section" id="caribbean">
            <h2>Caribbean Export Markets</h2>
            <p>Caribbean and Central American markets with export opportunity scores and import dependency.</p>
            <div class="stats-row">
                <div class="stat-card">
                    <div class="value">68.8%</div>
                    <div class="label">US Exports to Caribbean/LatAm</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);">
                    <div class="value">19</div>
                    <div class="label">Target Markets</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #00897B 0%, #004D40 100%);">
                    <div class="value">95%</div>
                    <div class="label">Avg Import Dependency</div>
                </div>
            </div>
            <div class="map-container" id="caribbeanMap"></div>
            <div class="layer-legend">
                <h4>Layers Included</h4>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-symbol" style="background: #4CAF50;"></div> High Opportunity</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #FFC107;"></div> Medium Opportunity</div>
                    <div class="legend-item"><div class="legend-line" style="background: #2E7D32;"></div> Export Routes</div>
                </div>
            </div>
        </section>

        <!-- Trucking Radius -->
        <section class="map-section" id="trucking">
            <h2>Port Redwing Trucking Service Areas</h2>
            <p>Drive time radius zones from Port Redwing terminal showing market reach and potential ready-mix customers.</p>
            <div class="stats-row">
                <div class="stat-card" style="background: linear-gradient(135deg, #1B5E20 0%, #0D47A1 100%);">
                    <div class="value">1 Hour</div>
                    <div class="label">55 mi - Tampa Bay Metro</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #2E7D32 0%, #1565C0 100%);">
                    <div class="value">3 Hours</div>
                    <div class="label">165 mi - Central/SW FL</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #4CAF50 0%, #42A5F5 100%);">
                    <div class="value">5 Hours</div>
                    <div class="label">275 mi - All FL + Adjacent</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #2196F3 0%, #0D47A1 100%);">
                    <div class="value">1,694</div>
                    <div class="label">Ready-Mix Customers</div>
                </div>
            </div>
            <div class="map-container" id="truckingMap"></div>
            <div class="layer-legend">
                <h4>Service Zones & Customers</h4>
                <div class="legend-items">
                    <div class="legend-item"><div class="legend-symbol" style="background: #4CAF50;"></div> 1-Hour Zone</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #81C784;"></div> 3-Hour Zone</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #C8E6C9;"></div> 5-Hour Zone</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #FF5722;"></div> Port Redwing</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #2196F3;"></div> FL Ready-Mix (894)</div>
                    <div class="legend-item"><div class="legend-symbol" style="background: #9C27B0;"></div> Gulf Coast Ready-Mix (800)</div>
                </div>
            </div>
        </section>

        <!-- Sources & Methodology -->
        <section class="map-section" id="sources">
            <h2>Sources & Methodology</h2>
            <p>Data sources, analytical methodology, and assumptions used in this market intelligence report.</p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 25px;">
                <!-- Primary Data Sources -->
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid var(--primary);">
                    <h3 style="color: var(--primary-dark); margin-bottom: 15px;">Primary Data Sources</h3>
                    <table style="width: 100%; font-size: 0.9rem; border-collapse: collapse;">
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 8px 0; font-weight: 600;">USGS Mineral Commodity Summaries 2025</td>
                            <td style="padding: 8px 0; color: #666;">Production, consumption, trade</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 8px 0; font-weight: 600;">Global Energy Monitor - Cement Tracker</td>
                            <td style="padding: 8px 0; color: #666;">Plant locations, capacities (July 2025)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 8px 0; font-weight: 600;">Panjiva Trade Intelligence</td>
                            <td style="padding: 8px 0; color: #666;">2,706 import manifests (2023-2025)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 8px 0; font-weight: 600;">Clarksons Shipping Intelligence</td>
                            <td style="padding: 8px 0; color: #666;">Freight rates (Dec 16, 2025)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 8px 0; font-weight: 600;">US Census Bureau</td>
                            <td style="padding: 8px 0; color: #666;">Trade statistics, demographics</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #ddd;">
                            <td style="padding: 8px 0; font-weight: 600;">USACE Navigation Data Center</td>
                            <td style="padding: 8px 0; color: #666;">Waterborne commerce (2023)</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px 0; font-weight: 600;">EPA ECHO Database</td>
                            <td style="padding: 8px 0; color: #666;">Ready-mix facilities (NAICS 327320)</td>
                        </tr>
                    </table>
                </div>

                <!-- Methodology -->
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid var(--secondary);">
                    <h3 style="color: var(--secondary-dark); margin-bottom: 15px;">Methodology</h3>
                    <div style="font-size: 0.9rem;">
                        <p style="margin-bottom: 12px;"><strong>Trade Flow Analysis:</strong> Aggregated 2,706 import manifests by consignee, shipper, port, and origin country. Weighted flows by MT volume.</p>
                        <p style="margin-bottom: 12px;"><strong>Market Sizing:</strong> Florida capacity from GEM database + import volumes from Panjiva. Demand = production + imports - exports.</p>
                        <p style="margin-bottom: 12px;"><strong>Trucking Radius:</strong> Calculated from Port Redwing (27.8456°N, 82.3789°W) at 50-55 mph average speed.</p>
                        <p style="margin-bottom: 0;"><strong>Freight Rates:</strong> Spot rates from Clarksons daily reports; route estimates by vessel class and distance.</p>
                    </div>
                </div>

                <!-- Data Limitations -->
                <div style="background: #fff3e0; padding: 20px; border-radius: 10px; border-left: 4px solid #FF9800;">
                    <h3 style="color: #E65100; margin-bottom: 15px;">Data Limitations</h3>
                    <ul style="font-size: 0.9rem; padding-left: 20px; margin: 0;">
                        <li style="margin-bottom: 8px;">White cement volumes not separately reported in most sources</li>
                        <li style="margin-bottom: 8px;">Terminal capacities not publicly disclosed by all operators</li>
                        <li style="margin-bottom: 8px;">Market share by company estimated from import/production data</li>
                        <li style="margin-bottom: 8px;">Customer volumes are proprietary; ranges estimated</li>
                        <li style="margin-bottom: 0;">Trucking zones are approximate; actual times vary by route</li>
                    </ul>
                </div>

                <!-- Key Assumptions -->
                <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; border-left: 4px solid var(--primary);">
                    <h3 style="color: var(--primary-dark); margin-bottom: 15px;">Key Assumptions</h3>
                    <ul style="font-size: 0.9rem; padding-left: 20px; margin: 0;">
                        <li style="margin-bottom: 8px;">Import price decline (6.4% YoY) continues into 2025</li>
                        <li style="margin-bottom: 8px;">Tariff rates based on current HTS codes</li>
                        <li style="margin-bottom: 8px;">72% capacity utilization (industry average)</li>
                        <li style="margin-bottom: 8px;">70-75% of cement goes to ready-mix segment</li>
                        <li style="margin-bottom: 0;">White cement priced at 2-3x gray cement</li>
                    </ul>
                </div>
            </div>

            <!-- GeoJSON Layers Table -->
            <div style="margin-top: 30px; background: white; padding: 20px; border-radius: 10px; border: 1px solid #ddd;">
                <h3 style="color: var(--neutral-dark); margin-bottom: 15px;">ArcGIS Online Layer Catalog</h3>
                <table style="width: 100%; font-size: 0.85rem; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--neutral-light);">
                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Layer Name</th>
                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Features</th>
                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Item ID</th>
                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Source</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">global_trade_flows_detailed</td>
                            <td style="padding: 8px;">24 flow lines</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">b7a606c95f4e452083ebe61cc1aa560a</td>
                            <td style="padding: 8px;">Panjiva aggregation</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">global_cement_producers</td>
                            <td style="padding: 8px;">21 countries</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">27c51725ba3145daa40195b4e9dfc12b</td>
                            <td style="padding: 8px;">GEM Tracker</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">us_cement_plants_national</td>
                            <td style="padding: 8px;">99 plants</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">747aaef2f7d94b1490b53f5af009a124</td>
                            <td style="padding: 8px;">GEM Tracker</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">us_ports_cement_imports</td>
                            <td style="padding: 8px;">17 ports</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">ddb3a31d206e4df38243097848b8f062</td>
                            <td style="padding: 8px;">Panjiva/USACE</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">cement_plants_florida_gulf</td>
                            <td style="padding: 8px;">7 plants</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">3f3ef46aefe5477aa130d4545f4a5316</td>
                            <td style="padding: 8px;">GEM Tracker</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">import_terminals_florida</td>
                            <td style="padding: 8px;">6 terminals</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">e99c0f3a723e4801a82777da2a8ed63f</td>
                            <td style="padding: 8px;">Panjiva/Ports</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">florida_counties_demand</td>
                            <td style="padding: 8px;">67 counties</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">97716968517a4cc0a74b1df20209b8a6</td>
                            <td style="padding: 8px;">US Census</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">caribbean_markets</td>
                            <td style="padding: 8px;">19 markets</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">ba30152c4156465e84330df9182ed39d</td>
                            <td style="padding: 8px;">Research</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">shipping_routes</td>
                            <td style="padding: 8px;">Export routes</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">c0db62b743824e8eb0b68e52e5bbb882</td>
                            <td style="padding: 8px;">Calculated</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 8px;">port_redwing_trucking_radius</td>
                            <td style="padding: 8px;">3 zones + origin</td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">03385e6b65524da2a0826f0534193f0d</td>
                            <td style="padding: 8px;">Calculated</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #eee; background: #e3f2fd;">
                            <td style="padding: 8px;"><strong>florida_readymix_plants</strong></td>
                            <td style="padding: 8px;"><strong>894 plants</strong></td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">e8f87ec92b8044dd94104bf7f1b7faf4</td>
                            <td style="padding: 8px;">EPA ECHO (NAICS 327320)</td>
                        </tr>
                        <tr style="background: #e3f2fd;">
                            <td style="padding: 8px;"><strong>gulf_coast_readymix_plants</strong></td>
                            <td style="padding: 8px;"><strong>1,694 plants</strong></td>
                            <td style="padding: 8px; font-family: monospace; font-size: 0.8rem;">704a24cdd7954790bfd696a21adec0eb</td>
                            <td style="padding: 8px;">EPA ECHO (FL,GA,AL,MS,LA,SC)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Coordinate Reference System -->
            <div style="margin-top: 20px; padding: 15px; background: var(--neutral-light); border-radius: 8px; font-size: 0.9rem;">
                <strong>Coordinate Reference System:</strong> All layers use WGS84 (EPSG:4326) |
                <strong>Report Date:</strong> December 16, 2025 |
                <strong>Prepared For:</strong> SESCO Cement Corp
            </div>
        </section>
    </div>

    <div class="footer">
        <p>Data Sources: Panjiva Trade Manifests (2023-2025), USGS Mineral Commodity Summary 2025, Global Energy Monitor</p>
        <p>Generated December 2025 | ArcGIS Online Hosted Layers</p>
    </div>

    <script>
        // Tab navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.map-section').forEach(s => s.classList.remove('active'));
                tab.classList.add('active');
                document.getElementById(tab.dataset.tab).classList.add('active');
            });
        });

        // ArcGIS Layer IDs
        const layerIds = {
            // New Infrastructure Layers (Dec 2025)
            northAmericanCementPlants: '353a095f807d475e8a415c9d21e0be4f',
            usCementImportPortsWeighted: '1ee57142d20a4779a58e3abffe3d1c6e',
            classIRailNetwork: 'cab0b48ec7224fd6b1e186db7f1de695',
            usMarineHighways: '3f760be450b246e99dc1718e8d9284f0',
            // Ready-Mix Customer Layers (Dec 2025)
            floridaReadyMixPlants: 'e8f87ec92b8044dd94104bf7f1b7faf4',
            gulfCoastReadyMixPlants: '704a24cdd7954790bfd696a21adec0eb',
            // Original Layers
            globalTradeFlows: 'b7a606c95f4e452083ebe61cc1aa560a',
            globalProducers: '27c51725ba3145daa40195b4e9dfc12b',
            tradeFlowsWeighted: '9c7534e2091d46f391b35582c47bb922',
            cementPlantsFL: '3f3ef46aefe5477aa130d4545f4a5316',
            usPortsCement: 'ddb3a31d206e4df38243097848b8f062',
            usCementPlantsNational: '747aaef2f7d94b1490b53f5af009a124',
            floridaCountiesDemand: '97716968517a4cc0a74b1df20209b8a6',
            usStatesCement: 'bb93c17c60174b068df3707e432a290a',
            importOrigins: 'cf36e49a685e4052a22f6ebf44f31d75',
            shippingRoutes: 'c0db62b743824e8eb0b68e52e5bbb882',
            caribbeanMarkets: 'ba30152c4156465e84330df9182ed39d',
            importTerminalsFL: 'e99c0f3a723e4801a82777da2a8ed63f',
            truckingRadius: '03385e6b65524da2a0826f0534193f0d'
        };

        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/GeoJSONLayer",
            "esri/widgets/Legend",
            "esri/widgets/LayerList"
        ], function(Map, MapView, GeoJSONLayer, Legend, LayerList) {

            // Helper to create GeoJSON layer from ArcGIS item
            function createLayer(itemId, renderer, popupTemplate) {
                const url = `https://www.arcgis.com/sharing/rest/content/items/${itemId}/data`;
                return new GeoJSONLayer({
                    url: url,
                    renderer: renderer,
                    popupTemplate: popupTemplate
                });
            }

            // === GLOBAL MAP ===
            const globalMap = new Map({ basemap: "gray-vector" });
            const globalView = new MapView({
                container: "globalMap",
                map: globalMap,
                center: [-40, 30],
                zoom: 2
            });

            // Trade flows layer
            const tradeFlowsLayer = createLayer(layerIds.globalTradeFlows, {
                type: "simple",
                symbol: {
                    type: "simple-line",
                    color: [30, 136, 229, 0.8],
                    width: 3
                }
            }, {
                title: "{origin} to {destination}",
                content: "Volume: {volume_label}<br>Tariff: {tariff}"
            });

            // Producers layer
            const producersLayer = createLayer(layerIds.globalProducers, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [13, 71, 161, 0.8],
                    size: 12,
                    outline: { color: "white", width: 2 }
                }
            }, {
                title: "{country}",
                content: "Production: {production_mt} MT/yr<br>Global Share: {pct_global}%"
            });

            globalMap.addMany([tradeFlowsLayer, producersLayer]);

            // === NATIONAL MAP ===
            const nationalMap = new Map({ basemap: "gray-vector" });
            const nationalView = new MapView({
                container: "nationalMap",
                map: nationalMap,
                center: [-98, 39],
                zoom: 4
            });

            const nationalPlantsLayer = createLayer(layerIds.usCementPlantsNational, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [25, 118, 210],
                    size: 10,
                    outline: { color: "white", width: 1.5 }
                }
            }, {
                title: "{name}",
                content: "Owner: {owner}<br>Capacity: {capacity_mt} MT/yr<br>State: {state}"
            });

            const portsLayer = createLayer(layerIds.usPortsCement, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [233, 30, 99],
                    size: 12,
                    outline: { color: "white", width: 2 }
                }
            }, {
                title: "{name}",
                content: "Volume: {volume_label}<br>Rank: #{rank}<br>US Share: {pct_us}%"
            });

            nationalMap.addMany([nationalPlantsLayer, portsLayer]);

            // === FLORIDA MAP ===
            const floridaMap = new Map({ basemap: "gray-vector" });
            const floridaView = new MapView({
                container: "floridaMap",
                map: floridaMap,
                center: [-82, 28],
                zoom: 6
            });

            const flPlantsLayer = createLayer(layerIds.cementPlantsFL, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [27, 94, 32],
                    size: 14,
                    outline: { color: "white", width: 2 }
                }
            }, {
                title: "{name}",
                content: "Owner: {owner}<br>Capacity: {capacity_mt} MT/yr"
            });

            const flTerminalsLayer = createLayer(layerIds.importTerminalsFL, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [233, 30, 99],
                    size: 12,
                    outline: { color: "white", width: 2 }
                }
            }, {
                title: "{name}",
                content: "Volume: {volume_label}<br>Capacity: {capacity_label}"
            });

            const flCountiesLayer = createLayer(layerIds.floridaCountiesDemand, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [76, 175, 80, 0.6],
                    size: 20,
                    outline: { color: [76, 175, 80], width: 1 }
                }
            }, {
                title: "{county} County",
                content: "Demand Index: {cement_demand_index}<br>Building Permits: {building_permits_2024}<br>Growth: {pop_growth_pct}%"
            });

            // Ready-mix plants layer for Florida
            const flReadyMixLayer = createLayer(layerIds.floridaReadyMixPlants, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [33, 150, 243, 0.7],
                    size: 6,
                    outline: { color: "white", width: 0.5 }
                }
            }, {
                title: "{name}",
                content: "Address: {address}<br>City: {city}, {state}<br>County: {county}<br>NAICS: {naics}"
            });

            floridaMap.addMany([flCountiesLayer, flReadyMixLayer, flPlantsLayer, flTerminalsLayer]);

            // === TAMPA MAP ===
            const tampaMap = new Map({ basemap: "gray-vector" });
            const tampaView = new MapView({
                container: "tampaMap",
                map: tampaMap,
                center: [-82.4, 27.9],
                zoom: 9
            });

            tampaMap.addMany([
                createLayer(layerIds.floridaCountiesDemand, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [76, 175, 80, 0.4], size: 30 }
                }),
                createLayer(layerIds.floridaReadyMixPlants, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [33, 150, 243, 0.8], size: 7, outline: { color: "white", width: 0.5 } }
                }, {
                    title: "{name}",
                    content: "Address: {address}<br>City: {city}<br>County: {county}"
                }),
                createLayer(layerIds.cementPlantsFL, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [27, 94, 32], size: 14, outline: { color: "white", width: 2 } }
                }),
                createLayer(layerIds.importTerminalsFL, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [233, 30, 99], size: 12, outline: { color: "white", width: 2 } }
                })
            ]);

            // === CARIBBEAN MAP ===
            const caribbeanMap = new Map({ basemap: "gray-vector" });
            const caribbeanView = new MapView({
                container: "caribbeanMap",
                map: caribbeanMap,
                center: [-75, 18],
                zoom: 5
            });

            const caribbeanLayer = createLayer(layerIds.caribbeanMarkets, {
                type: "simple",
                symbol: {
                    type: "simple-marker",
                    color: [76, 175, 80],
                    size: 14,
                    outline: { color: "white", width: 2 }
                }
            }, {
                title: "{name}",
                content: "Opportunity: {opportunity}<br>Import Dependency: {import_dependency}%<br>Est. Demand: {est_demand_label}"
            });

            const routesLayer = createLayer(layerIds.shippingRoutes, {
                type: "simple",
                symbol: {
                    type: "simple-line",
                    color: [46, 125, 50, 0.7],
                    width: 2,
                    style: "dash"
                }
            });

            caribbeanMap.addMany([routesLayer, caribbeanLayer]);

            // === TRUCKING RADIUS MAP ===
            const truckingMap = new Map({ basemap: "gray-vector" });
            const truckingView = new MapView({
                container: "truckingMap",
                map: truckingMap,
                center: [-82.4, 28.5],
                zoom: 6
            });

            // Note: Replace TRUCKING_LAYER_ID with actual ID after uploading to ArcGIS Online
            // For now, using local GeoJSON file path (works if hosting locally)
            const truckingRadiusLayer = new GeoJSONLayer({
                url: layerIds.truckingRadius ?
                    `https://www.arcgis.com/sharing/rest/content/items/${layerIds.truckingRadius}/data` :
                    "file:///G:/My%20Drive/LLM/project_cement/geospatial/port_redwing_trucking_radius.geojson",
                renderer: {
                    type: "unique-value",
                    field: "zone",
                    uniqueValueInfos: [
                        {
                            value: "5-Hour",
                            symbol: {
                                type: "simple-fill",
                                color: [200, 230, 201, 0.3],
                                outline: { color: [76, 175, 80], width: 2 }
                            }
                        },
                        {
                            value: "3-Hour",
                            symbol: {
                                type: "simple-fill",
                                color: [129, 199, 132, 0.4],
                                outline: { color: [46, 125, 50], width: 2 }
                            }
                        },
                        {
                            value: "1-Hour",
                            symbol: {
                                type: "simple-fill",
                                color: [76, 175, 80, 0.5],
                                outline: { color: [27, 94, 32], width: 3 }
                            }
                        }
                    ],
                    defaultSymbol: {
                        type: "simple-marker",
                        color: [255, 87, 34],
                        size: 16,
                        outline: { color: "white", width: 2 }
                    }
                },
                popupTemplate: {
                    title: "{zone}",
                    content: "Drive Time: {drive_time_hrs} hours<br>Radius: {radius_miles} miles<br>Markets: {markets}<br>Population: {population_millions}M"
                }
            });

            // Add Florida plants, terminals, and ready-mix customers
            truckingMap.addMany([
                truckingRadiusLayer,
                // Gulf Coast ready-mix (purple, smaller)
                createLayer(layerIds.gulfCoastReadyMixPlants, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [156, 39, 176, 0.6], size: 5, outline: { color: "white", width: 0.5 } }
                }, {
                    title: "{name}",
                    content: "City: {city}, {state}<br>County: {county}"
                }),
                // Florida ready-mix (blue, larger)
                createLayer(layerIds.floridaReadyMixPlants, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [33, 150, 243, 0.8], size: 6, outline: { color: "white", width: 0.5 } }
                }, {
                    title: "{name}",
                    content: "Address: {address}<br>City: {city}, {state}<br>County: {county}"
                }),
                createLayer(layerIds.cementPlantsFL, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [27, 94, 32], size: 12, outline: { color: "white", width: 2 } }
                }),
                createLayer(layerIds.importTerminalsFL, {
                    type: "simple",
                    symbol: { type: "simple-marker", color: [233, 30, 99], size: 10, outline: { color: "white", width: 2 } }
                })
            ]);
        });
    </script>
</body>
</html>
